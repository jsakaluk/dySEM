<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dySEM">
<title>dySEM overview • dySEM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dySEM overview">
<meta property="og:description" content="dySEM">
<meta property="og:image" content="https://jsakaluk.github.io/dySEM/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dySEM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/dySEM.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/apim.html">The Latent Actor-Partner Interdependence Model: Rationale, Empirical Trade-offs, and Analytic Resources</a>
    <a class="dropdown-item" href="../articles/invariance.html">Invariance Testing with Potentially Indistinguishable Dyads: Rationale and Practices for a More Logical and Inclusive Testing Sequence</a>
    <a class="dropdown-item" href="../articles/varnames.html">Anatomy of a Variable Name</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jsakaluk/dySEM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>dySEM overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jsakaluk/dySEM/blob/HEAD/vignettes/dySEM.Rmd" class="external-link"><code>vignettes/dySEM.Rmd</code></a></small>
      <div class="d-none name"><code>dySEM.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why-dysem">Why <code>dySEM</code>?<a class="anchor" aria-label="anchor" href="#why-dysem"></a>
</h2>
<ul>
<li>Speeds up writing <code>lavaan</code> syntax for latent dyadic
models</li>
<li>Makes it easy to share your code</li>
<li>Helps prevent typos or model-misspecifications mucking up your
analyses and/or reporting</li>
<li>Creates figures and “90% Ready” tables of results for you</li>
</ul>
</div>
<div class="section level2">
<h2 id="the-dysem-workflow-at-a-glance">The <code>dySEM</code> Workflow at a Glance<a class="anchor" aria-label="anchor" href="#the-dysem-workflow-at-a-glance"></a>
</h2>
<p><code>dySEM</code> is designed to be maximally useful if you are
following some best-practices for reproducibility when using <em>R</em>.
Namely, using a separate directory with an R Studio Project
(<code>.Rproj</code>, see <a href="https://r4ds.had.co.nz/workflow-projects.html" class="external-link">here</a> if you are
new to using projects) will allow <code>dySEM</code> to be more helpful,
by creating sub-folders for your <code>scripts</code> and
<code>output</code> where it will automatically save any scripts you
create, or any tables and/or figures of output that you create.
<code>dySEM</code> will still do these things without the use of an R
Studio project, but all bets are off for where R Studio will attempt to
save them.</p>
<p>A typical <code>dySEM</code> workflow is then as follows:</p>
<ol style="list-style-type: decimal">
<li>Import and wrangle your <strong>Data</strong> to a <em>dyad
structure data set</em>
</li>
<li>
<strong>Scrape</strong> variables from your data frame</li>
<li>
<strong>Script</strong> your preferred model</li>
<li>
<strong>Fit</strong> and <strong>Inspect</strong> your scripted
model using <code>lavaan</code>
</li>
<li>
<strong>Output</strong> statisitcal table(s) and or
visualization(s)</li>
</ol>
<p>You might also use optional <code>dySEM</code> calculators after Step
3 to <strong>get</strong> some additional information.</p>
<p>These families of functions–<strong><em>Scrapers</em></strong>,
<strong><em>Scripters</em></strong>, and
<strong><em>Outputters</em></strong>, and
<strong><em>Getters</em></strong>–are listed and described in the <a href="https://jsakaluk.github.io/dySEM/reference/index.html">Reference</a></p>
<p>We now demonstrate a typical <code>dySEM</code> workflow, using the
built-in <a href="https://github.com/jsakaluk/dySEM/blob/master/R/DRES-data%20copy.R" class="external-link"><code>DRES</code></a>
data (Raposso, Impett, &amp; Muise, 2020), in order to perform dyadic
confirmatory factor analysis (CFA). More elaborate and specific
vignettes are forthcoming to provide didactic materials for conducting
other sorts of dyadic data analyses via <code>dySEM</code>.</p>
</div>
<div class="section level2">
<h2 id="import-and-wrangle-data">1. Import and Wrangle Data<a class="anchor" aria-label="anchor" href="#import-and-wrangle-data"></a>
</h2>
<p>We will use a subset of <a href="https://github.com/jsakaluk/dySEM/blob/master/R/DRES-data%20copy.R" class="external-link"><code>DRES</code></a>,
consisting of 121 dyadic couples’ ratings of relationship quality on 9
of the <a href="https://journals.sagepub.com/doi/abs/10.1177/0146167200265007" class="external-link">PRQC</a>
indicators (1 = <em>not at all</em>, 7 = <em>extremely</em>; all
indicators positively keyed). Structural equation modeling (SEM)
programs like <code>lavaan</code> require dyadic data to be in <em>dyad
structure dataset</em>, whereby each row contains the data for one dyad,
with separate columns for each observation (in this case, indicator
variables of latent relationship quality) made for each member of the
dyad. We may eventually build in data-transformation functions to go
from various data structures to a <em>dyad structure</em>, but for now,
we recommend <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link"><code>tidyr::pivot_wider</code></a>
or the tools provided by <a href="http://davidakenny.net/RDDD.htm" class="external-link">Ledermann &amp; Kenny
(2014)</a></p>
<p>Like many real-world analytic contexts, <a href="https://github.com/jsakaluk/dySEM/blob/master/R/DRES-data%20copy.R" class="external-link"><code>DRES</code></a>
contains a number of other variables that we aren’t interested in
modeling at this time (specifically, 5 indicators of sexual satisfaction
from the <a href="https://www.tandfonline.com/doi/abs/10.1080/00224490509552264" class="external-link">GMSEX</a>
for each dyad member). This wil not be a problem for
<code>dySEM</code>.</p>
<p>Our data set therefore results in a tibble that is 121 (# of couples)
x 28 ((9 PRQC items + 5 GMSEX items) x 2 (# of dyad members)):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DRES</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 121 × 28</span></span></span>
<span><span class="co">#&gt;    PRQC_1.1 PRQC_2.1 PRQC_3.1 PRQC_4.1 PRQC_5.1 PRQC_6.1 PRQC_…¹ PRQC_…² PRQC_…³</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        7        7        7        7        7        7       7       5       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        6        6        6        7        7        6       5       5       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        7        7        7        7        7        7       7       6       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        6        6        6        7        7        6       5       6       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        7        7        7        7        7        6       7       6       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        6        6        6        6        6        3       6       5       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        7        6        7        6        6        6       5       6       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        6        7        7        7        7        6       5       6       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        7        7        7        7        7        6       6       6       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        6        6        6        7        7        7       4       4       4</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 111 more rows, 19 more variables: PRQC_1.2 &lt;int&gt;, PRQC_2.2 &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   PRQC_3.2 &lt;int&gt;, PRQC_4.2 &lt;int&gt;, PRQC_5.2 &lt;int&gt;, PRQC_6.2 &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   PRQC_7.2 &lt;int&gt;, PRQC_8.2 &lt;int&gt;, PRQC_9.2 &lt;int&gt;, sexsat1.1 &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   sexsat2.1 &lt;int&gt;, sexsat3.1 &lt;int&gt;, sexsat4.1 &lt;int&gt;, sexsat5.1 &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   sexsat1.2 &lt;int&gt;, sexsat2.2 &lt;int&gt;, sexsat3.2 &lt;int&gt;, sexsat4.2 &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   sexsat5.2 &lt;int&gt;, and abbreviated variable names ¹​PRQC_7.1, ²​PRQC_8.1,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​PRQC_9.1</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scrape">2. Scrape<a class="anchor" aria-label="anchor" href="#scrape"></a>
</h2>
<p>The first step in a typical <code>dySEM</code> workflow is to
<strong>scrape</strong> the indicator variables that are to feature in
your latent dyadic model. The scraping functions in <code>dySEM</code>
accomplish this by making an important but reasonable (in most cases)
assumptions about how the useR has named their indicator variables.
Specifically:</p>
<blockquote>
<p>Indicator variables of a latent variable will be named in a highly
repetitious manner, distinguished by partner using two numbers or
characters</p>
</blockquote>
<div class="section level3">
<h3 id="anatomy-of-a-repetitious-indicator-name">Anatomy of a Repetitious Indicator Name<a class="anchor" aria-label="anchor" href="#anatomy-of-a-repetitious-indicator-name"></a>
</h3>
<p>The <code>dySEM</code> scrapers consider appropriately repetitously
named indicators as consisting of at least three distinct elements:
<strong>s</strong>tem, <strong>i</strong>tem, and
<strong>p</strong>artner. For longitudinal designs, a fourth
element–<strong>t</strong>ime is also considered to be part of the
repetitious structure of variable names, but we cover longitudinal
variable-scraping in a separate vignette. <strong>delimiter</strong>
characters (e.g., “.”, “_“) are commonly–but not always–used to separate
some/all of these elements.</p>
<p><strong>TO DO: MAKE THIS SIMPLER AND START WITH VISUALS AT THIS
POINT</strong></p>
<ol style="list-style-type: decimal">
<li>The indicator <strong>s</strong>tem (i.e., the character(s) that
captures to which scale/latent variable the indicators correspond, e.g.,
“PRQC”, “sexsat”, “BFI”, etc.). The contents of indicator stems will
vary considerably both within and between data sets.</li>
<li>The indicator <strong>i</strong>tem number (i.e, the number that
captures which indicator–within a set of indicators of some <em>n</em>
length–is located in a given column, e.g., 1-9 for our PRQC items)</li>
<li>And the number or character <strong>p</strong>artner capturing to
which member of the dyad (the first or second) a given indicator
corresponds (e.g., “A” or “B”, “M” or “F”, “1” or “2”).
<strong><em>Note</em></strong>: this is only about variable selection;
this has no bearing on whether a given dyadic model is specified to be
(in)distinguishiable (which is determined by the
<strong>script</strong>).</li>
</ol>
<p><code>dySEM</code> scrapers largely function by asking you to specify
in what order the elements of variable names are ordered. For example: *
<code>x_order = "sip"</code> would scrape variable names according to a
<strong>s</strong>tem –&gt; <strong>i</strong>tem –&gt;
<strong>p</strong>artner order (e.g., PRQC)</p>
</div>
<div class="section level3">
<h3 id="using-dysem-scrapers">Using <code>dySEM</code> Scrapers<a class="anchor" aria-label="anchor" href="#using-dysem-scrapers"></a>
</h3>
<p>The <code>scrapeVarCross</code> function is your <code>dySEM</code>
scraper for cross-sectional dyadic data. It can acomodate scraping
indicators for models featuring one latent variable (e.g., as in our
dyadic CFA), as well as bivariate latent variable models, such as the
Actor-Partner Interdependence Model (APIM). We cover scraping and
scripting of these bivariate models in other vignettes.</p>
<p>We first supply our data frame, <code>DRES</code>. We want to extract
our PRQC indicators, which have the following properties:</p>
<ul>
<li>a reoccuring <strong>S</strong>tem of “PRQC”</li>
<li>distinguishing <strong>P</strong>artner charcters of “1” and
“2”</li>
<li>a “sip” (<strong>S</strong>tem, <strong>I</strong>tem,
<strong>P</strong>artner) order of elements</li>
<li>the <strong>S</strong> and <strong>I</strong> are separated by a “_”
<strong>delimiter</strong>
</li>
<li>the <strong>I</strong> and <strong>P</strong> are separated by a “.”
<strong>delimiter</strong>
</li>
</ul>
<p>Feeding this information to <code>scrapeVarCross</code> is quite
straightforward:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dvn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scrapeVarCross.html">scrapeVarCross</a></span><span class="op">(</span><span class="va">DRES</span>, x_order <span class="op">=</span> <span class="st">"sip"</span>, x_stem <span class="op">=</span> <span class="st">"PRQC"</span>, x_delim1<span class="op">=</span><span class="st">"_"</span>,x_delim2<span class="op">=</span><span class="st">"."</span>,  distinguish_1<span class="op">=</span><span class="st">"1"</span>, distinguish_2<span class="op">=</span><span class="st">"2"</span><span class="op">)</span></span></code></pre></div>
<p>Before looking at what <code>scrapeVarCross</code> returns, you may
be wondering:</p>
<ol style="list-style-type: decimal">
<li>Where is information about <strong>I</strong>tem number for each
indicator specified? And…</li>
<li>What should you do if your indicator names don’t use two (or any)
delimiting characters?</li>
</ol>
<p>The answer to 1. is that <strong>I</strong>tem number is
automatically captured “behind the scenes” by
<code>scrapeVarCross</code>. Specifically, <code>scrapeVarCross</code>
searches for (and then captures) any variable names containing your stem
and <em>any</em> digit(s) (using a regular expression).</p>
<p>The answer to 2. is that you would simply omit the
<code>x_delim1</code> and/or <code>x_delim2</code> arguments–by default,
<code>scrapeVarCross</code> will create variable names from
<strong>S</strong> <strong>I</strong> and <strong>P</strong> without any
separating delimiters, unless you declare a character in one/both
delimiter arguments.</p>
<p><code>scrapeVarCross</code> returns a generic list (which I refer to
as a <code>dvn</code> for a list of “dyad variable names”) consisting of
6 (or 9, if scraping for a bivariate model) elements:</p>
<ol style="list-style-type: decimal">
<li>a vector of indicator names for the first member of the dyad</li>
<li>a vector of indicator names for the second member of the dyad</li>
<li>a number capturing how many indicators per dyad member were
stored</li>
<li>the distinguishing character in names for indicators from the first
member of the dyad</li>
<li>the distinguishing character in names for indicators from the second
member of the dyad</li>
<li>the total number of indicators scraped</li>
</ol>
<p>This might not seem like much, but the list returned by
<code>scrapeVarCross</code> contains <em>all</em> the information needed
to automate the scripting of <code>lavaan</code> syntax for virtually
any dyadic SEM that you can imagine.</p>
</div>
</div>
<div class="section level2">
<h2 id="script">3. Script<a class="anchor" aria-label="anchor" href="#script"></a>
</h2>
<p>The <code>script...()</code> <strong>TODO</strong>: CREATE/LINK to
family in Reference on pkgdown site: family of functions in
<code>dySEM</code> simplify the process of accurately and reproducibly
scripting dyadic SEMs to a singleton line of R code.</p>
<p>Each <em>Scripter</em> function is a wrapper for a series of
<em>Helper</em> functions (see <a href="https://github.com/jsakaluk/dySEM/blob/master/R/cfa_funs.R" class="external-link"><code>cfa_funs</code></a>
if you are interested) that snatch the information about the indicators
they need from a saved <code>dvn</code> object and combine it with other
text to write the <code>lavaan</code> syntax for a particular part of
the measurement (e.g., factor loadings, item intercepts) or structural
(e.g., regression slopes, factor means) portion of your model.</p>
<p><em>Scripter</em> functions like <a href="https://github.com/jsakaluk/dySEM/blob/master/R/scriptCFA.R" class="external-link"><code>scriptCFA</code></a>
typically require only three arguments to be specified:</p>
<ol style="list-style-type: decimal">
<li>the <code>dvn</code> object (e.g., from <code>scrapeVarCross</code>)
to be used to script the model</li>
<li>a mostly arbitrary name for the latent variable(s) you are modeling
(bivariate model scripting functions like <code>scriptAPIM</code> have
you input two names)</li>
<li>the kind of parameter equality constraints that you wish to be
imposed (if any), such as those corresponding to particular levels of
measurement invariance (e.g., “loading”), or even a fully
“indistiguishable” model (i.e., in which all measurement and structural
parameters are constrained to equality between partners)</li>
</ol>
<p>If you plan on scripting multiple models, I recommend that you name
the output of <code>Scripters</code> to include information about the
latent variable’s name (from 2.) and model (from 3.). For example, if we
were to use <code>scriptCFA</code> to generate scripts for a
configurally invariant CFA of the PRQC items we scraped, we could
specify</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qual.config.script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scriptCFA.html">scriptCFA</a></span><span class="op">(</span><span class="va">dvn</span>, lvname <span class="op">=</span> <span class="st">"Quality"</span>, model <span class="op">=</span> <span class="st">"configural"</span><span class="op">)</span></span></code></pre></div>
<p><code>scriptCFA</code> returns to your environment an (ugly, to the
human-eyes) character object consisting of the <code>lavaan</code>
syntax corresponding to the model that matches the <em>Scripter</em>
function (i.e., in this case a CFA) and input for the <code>model</code>
argument (i.e., configurally invariant).</p>
<p>Meanwhile, behind the scenes, <code>scriptCFA</code> has created a
folder in your working directory called “scripts”, and has stored a .txt
file containing the (less-ugly, to the human eyes) <code>lavaan</code>
syntax for your model. The file will be named as a combination of your
<code>lvname</code> and <code>model</code> arguments.</p>
<p>We think this syntax-exporting-.txt feature serves three important
purposes:</p>
<ol style="list-style-type: decimal">
<li>It makes it easy to immediately share your analytic code (i.e., just
drop the .txt file in your OSF project)</li>
<li>It can be useful as an exemplar from which to learn how certain
model features of dyadic SEMs are scripted in <code>lavaan</code>. For
example, our <code>Scripters</code> manually specify (and label) the
estimation of certain parameters that would already be estimated by
default, but this way you can learn how differences in model
specification (e.g., changing to a different level of invariance)
impacts the <code>lavaan</code> syntax. And…</li>
<li>Should you require a model that is more customizable (e.g., a
particular pattern of partial dyadic invariance), the text in the .txt
file can serve as useful starting point for scripting your model that
should (hopefully) only require but a few “handmade” changes (e.g.,
keeping most item intercepts equated via
<code>model = "intercepts</code>, and manually freeing only those that
are appreciably different).</li>
</ol>
<p>The modeling efficiency and accuracy gained via <code>dySEM</code>’s
automated scripting may already be apparent, but becomes painfully
obvious once you leverage <code>dySEM</code> to quickly script a
sequence of competing models (e.g., from configural invariance CFA –&gt;
fully indistinguisbale CFA)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qual.load.script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scriptCFA.html">scriptCFA</a></span><span class="op">(</span><span class="va">dvn</span>, lvname <span class="op">=</span> <span class="st">"Quality"</span>, model <span class="op">=</span> <span class="st">"loading"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qual.int.script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scriptCFA.html">scriptCFA</a></span><span class="op">(</span><span class="va">dvn</span>, lvname <span class="op">=</span> <span class="st">"Quality"</span>, model <span class="op">=</span> <span class="st">"intercept"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qual.res.script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scriptCFA.html">scriptCFA</a></span><span class="op">(</span><span class="va">dvn</span>, lvname <span class="op">=</span> <span class="st">"Quality"</span>, model <span class="op">=</span> <span class="st">"residual"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qual.ind.script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scriptCFA.html">scriptCFA</a></span><span class="op">(</span><span class="va">dvn</span>, lvname <span class="op">=</span> <span class="st">"Quality"</span>, model <span class="op">=</span> <span class="st">"indist"</span><span class="op">)</span></span></code></pre></div>
<p>The scripting of longitudinal dyadic SEM models is not yet supported
by <code>dySEM</code>, but we hope to develop this functionality over
the Spring/Summer 2021.</p>
</div>
<div class="section level2">
<h2 id="fit-and-inspect">4. Fit and Inspect<a class="anchor" aria-label="anchor" href="#fit-and-inspect"></a>
</h2>
<p>By design, we have attempted to avoid functionality pertaining to
model-fitting and inspection in <code>dySEM</code>: <code>lavaan</code>
does that perfectly well itself. We therefore strongly recommend that
you cultivate a command of <code>lavaan</code>’s basic functionality
before delving too far with <code>dySEM</code>–the package <a href="https://lavaan.ugent.be/tutorial/index.html" class="external-link">tutorial website</a>
is a very good place to get started.</p>
<p>You can immediately pass any script(s) returned from a
<code>dySEM</code> scripter (e.g., <code>scriptCFA</code>) to your
intended <code>lavaan</code> wrapper (we recommend <code>cfa</code>–be
sure to disable any options that might fix parameters, as the scripter
has already taken care of manually specifying which parameters to fix or
estimate), with your prefered estimator and missing data treatment. For
example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Fit configural invariance model</span></span>
<span><span class="va">qual.config.fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">qual.config.script</span>, data <span class="op">=</span> <span class="va">DRES</span>, std.lv <span class="op">=</span> <span class="cn">FALSE</span>, auto.fix.first<span class="op">=</span> <span class="cn">FALSE</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Fit loading invariance model</span></span>
<span><span class="va">qual.load.fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">qual.load.script</span>, data <span class="op">=</span> <span class="va">DRES</span>, std.lv <span class="op">=</span> <span class="cn">FALSE</span>, auto.fix.first<span class="op">=</span> <span class="cn">FALSE</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Fit intercept invariance model</span></span>
<span><span class="va">qual.int.fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">qual.int.script</span>, data <span class="op">=</span> <span class="va">DRES</span>, std.lv <span class="op">=</span> <span class="cn">FALSE</span>, auto.fix.first<span class="op">=</span> <span class="cn">FALSE</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Fit residual invariance model</span></span>
<span><span class="va">qual.res.fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">qual.res.script</span>, data <span class="op">=</span> <span class="va">DRES</span>, std.lv <span class="op">=</span> <span class="cn">FALSE</span>, auto.fix.first<span class="op">=</span> <span class="cn">FALSE</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Fit fully indistinguishable model</span></span>
<span><span class="va">qual.ind.fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">qual.ind.script</span>, data <span class="op">=</span> <span class="va">DRES</span>, std.lv <span class="op">=</span> <span class="cn">FALSE</span>, auto.fix.first<span class="op">=</span> <span class="cn">FALSE</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>At this point, the full arsenal of <code>lavaan</code>
model-inspecting tools are at your disposal. Two that you will almost
certainly want to make use of are <code>summary</code> and
<code>anova</code>.</p>
<p><code>summary</code> will useful for printing model fit information
as well as parameter estimates and tests to your console. For
example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">qual.config.fit</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span>, rsquare <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>anova</code>, meanwhile, will enable you to perform comparisons
of competing nested dyadic models. For example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">qual.config.fit</span>, <span class="va">qual.load.fit</span>, <span class="va">qual.int.fit</span>, <span class="va">qual.res.fit</span>, <span class="va">qual.ind.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Chi-Squared Difference Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  Df    AIC    BIC  Chisq Chisq diff    RMSEA Df diff Pr(&gt;Chisq)</span></span>
<span><span class="co">#&gt; qual.config.fit 125 5102.8 5280.6 573.33                                       </span></span>
<span><span class="co">#&gt; qual.load.fit   133 5096.5 5252.2 583.09     9.7565 0.042954       8     0.2825</span></span>
<span><span class="co">#&gt; qual.int.fit    141 5089.1 5222.5 591.66     8.5669 0.024403       8     0.3801</span></span>
<span><span class="co">#&gt; qual.res.fit    150 5083.5 5191.9 604.04    12.3872 0.056237       9     0.1924</span></span>
<span><span class="co">#&gt; qual.ind.fit    152 5081.4 5184.2 605.97     1.9264 0.000000       2     0.3817</span></span></code></pre></div>
<p>You can learn about what other kinds of detail you can extract from a
fitted <code>lavaan</code> model <a href="https://lavaan.ugent.be/tutorial/inspect.html" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="output">5. Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p><code>dySEM</code> also contains functionality to help you quickly,
correctly, and reproducibly generate output from your fitted model(s),
in the forms of path diagrams and/or tables of statistical values. Path
diagram creation is supported via the <a href="https://cran.r-project.org/web/packages/semPlot/index.html" class="external-link"><code>semPlot</code></a>
package’s <code>semPaths</code> function, whereas table creation is
currently supported by the <a href="https://strengejacke.github.io/sjPlot/" class="external-link"><code>sjPlot</code></a>
package’s <code>tab_df</code> function, though users should be aware
that <a href="https://github.com/jsakaluk/dySEM/issues/28" class="external-link">we are
considering</a> a move to the <a href="https://gt.rstudio.com" class="external-link"><code>gt</code></a> package for improved
tabling capacity.</p>
<p>The <code>outputModel</code> function is currenty
<code>dySEM</code>’s all-purpose outputting function.</p>
<p>The useR must specify the <code>dvn</code> of scraped variables used
to script the model and the type of model being outputted (e.g., “cfa”).
UseRs can specify whether they only want a path diagram or some table(s)
to be outputted (e.g., by setting either <code>figure = FALSE</code> or
<code>table = FALSE</code>), but by default both are created and written
to an <code>output</code> folder in your working directory. UseRs can
further specify what kind of path diagram (e.g., using standardized or
unstandardized value) or tables (e.g., featuring measurement- or
structural-model parameter, or both) are created.</p>
<p>Whatever options the useR specifies, <code>outputModel</code> is
typically run without assigning its output to an object, as it’s mostly
to facilitate statistical reporting for scientific articles:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/outputModel.html">outputModel</a></span><span class="op">(</span><span class="va">dvn</span>, model <span class="op">=</span> <span class="st">"cfa"</span>, fit <span class="op">=</span> <span class="va">qual.config.fit</span>, </span>
<span>            table <span class="op">=</span> <span class="cn">TRUE</span>, tabletype <span class="op">=</span> <span class="st">"measurement"</span>, </span>
<span>            figure <span class="op">=</span> <span class="cn">TRUE</span>, figtype <span class="op">=</span> <span class="st">"unstandardized"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by John Sakaluk, Robyn Kilshaw, Alexandra Fisher.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
